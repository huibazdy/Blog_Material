# 指针和引用的区别



> ***区别一：能否为空？***

* **指针可以置为空**（不指向任何对象）

  ```c++
  std::string *ps;  // 合法但危险
  ```

  所以指针使用前必须检查合法性：

  ```c++
  void f1(const int *p)
  {
      if(p) {       // 检查是否为 nullptr
          std::cout<<v<<std::endl;
      }
  }

* **引用必须指向某个对象**（不能为空，必须初始化）

  ```c++
  std::string& r1;        // 错误，引用未被初始化
  std::string s("happy");
  std::string& r2 = s;    // 正确，引用 r2 指向 s
  ```

  因为引用必然非空，所以使用引用使用前无需检查合法性：

  ```c++
  void f1(const int& r)
  {
      std::cout<<r<<std::endl;
  }
  ```



> ***区别二：是否改变指向？***

* **指针可改变指向**

  ```c++
  std::string s1("start");
  std::string *p = &s1;   // p 指向 s1
  std::string s2("end");
  p = &s2;                // p 指向 s2

* **引用不能改变指向**

  总是指向被初始化时的对象，以后不能被改变：

  ```c++
  std::string s1("start");
  std::string& r = s1;   // r 指向 s1
  std::string s2("end");
  r = s2;                // r 指向 s1，但 s1 的值被改为 “end”



> ***小结：什么时候用指针？什么时候用引用***

* **用指针**
  1. 可能不指向任何对象（指针置为空）；
  2. 可能不同时刻指向不同对象（改变指针指向）；
* **用引用**
  1. 必须指向一个对象（必须初始化，非空）；
  2. 指向一个对象后就不能改变指向；